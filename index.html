<!DOCTYPE html>
<html>
<head>
  <title>Suggestion Box</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    
    h1 {
      margin-top: 50px;
    }
    
    #suggestion-form {
      margin-top: 20px;
    }
    
    #suggestion-input {
      width: 80%;
      height: 100px;
      font-size: 16px;
    }
    
    #suggestion-submit {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
    }
    
    #suggestion-list {
      margin-top: 50px;
      text-align: left;
    }
    
    .suggestion {
      margin-bottom: 10px;
      padding: 10px;
      background-color: #f2f2f2;
    }
    
    .suggestion-votes {
      font-weight: bold;
      margin-left: 10px;
    }
    
    .vote-button {
      margin-left: 10px;
      padding: 5px 10px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Suggestion Box</h1>
  
  <form id="suggestion-form">
    <textarea id="suggestion-input" placeholder="Write your suggestion here"></textarea>
    <br>
    <button id="suggestion-submit">Submit</button>
  </form>
  
  <div id="suggestion-list"></div>
  
  <script>
    // Retrieve suggestions from the server or initialize an empty array
    let suggestions = [];

    // Retrieve user's vote status from local storage or initialize as an empty object
    let userVoteStatus = JSON.parse(localStorage.getItem('userVoteStatus')) || {};

    // Render suggestions on page load
    renderSuggestions();

    // Handle form submission
    document.getElementById('suggestion-form').addEventListener('submit', function(event) {
      event.preventDefault();

      // Get the suggestion text from the input field
      let suggestionText = document.getElementById('suggestion-input').value;

      // Create a new suggestion object with initial vote count of 0
      let suggestion = {
        text: suggestionText,
        votes: 0
      };

      // Add the suggestion to the array
      suggestions.push(suggestion);

      // Save the updated suggestions array to the server
      saveSuggestions();

      // Clear the input field
      document.getElementById('suggestion-input').value = '';

      // Render the updated suggestions
      renderSuggestions();
    });

    // Handle vote button click
    document.getElementById('suggestion-list').addEventListener('click', function(event) {
      if (event.target.classList.contains('vote-button')) {
        let suggestionIndex = event.target.dataset.index;
        let suggestion = suggestions[suggestionIndex];

        // Check if the user has already voted for a suggestion
        if (!userVoteStatus.voted) {
          // Increment the vote count for the selected suggestion
          suggestion.votes++;

          // Update the user's vote status
          userVoteStatus.voted = true;
          userVoteStatus.votedSuggestionIndex = suggestionIndex;

          // Save the updated suggestions and user vote status
          saveSuggestions();
          saveUserVoteStatus();

          // Render the updated suggestions
          renderSuggestions();
        }
      }
    });

    // Function to render suggestions on the page
    function renderSuggestions() {
      let suggestionList = document.getElementById('suggestion-list');
      suggestionList.innerHTML = '';

      suggestions.forEach(function(suggestion, index) {
        let suggestionElement = document.createElement('div');
        suggestionElement.classList.add('suggestion');

        let suggestionTextElement = document.createElement('span');
        suggestionTextElement.textContent = suggestion.text;

        let voteButton = document.createElement('button');
        voteButton.classList.add('vote-button');
        voteButton.textContent = 'Vote';
        voteButton.dataset.index = index;

        let voteCountElement = document.createElement('span');
        voteCountElement.classList.add('suggestion-votes');
        voteCountElement.textContent = suggestion.votes;

        suggestionElement.appendChild(suggestionTextElement);
        suggestionElement.appendChild(voteButton);
        suggestionElement.appendChild(voteCountElement);

        suggestionList.appendChild(suggestionElement);
      });
    }

    // Function to save the suggestions array to the server
    function saveSuggestions() {
      // Code to save suggestions to the server
    }

    // Function to save the user's vote status to local storage
    function saveUserVoteStatus() {
      localStorage.setItem('userVoteStatus', JSON.stringify(userVoteStatus));
    }
  </script>
</body>
</html>
